<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta content="width=device-width,initial-scale=1" name="viewport">
<meta content="no-referrer" name="referrer">
<link href="data:image/x-icon;," rel="icon">
<title>ReynielTV - Clean IPTV</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.11.2/controls.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* ==== Styles (same as your previous file, omitted here for brevity) ==== */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Arial,sans-serif;background:#1a1a1a;color:#fff;height:100vh;overflow:hidden}
#app-container{display:flex;flex-direction:column;height:100vh}
#video-container{height:40vh;background:#000;position:relative;flex-shrink:0;border:none}
#video{width:100%;height:100%;object-fit:contain}
#brand-logo{position:absolute;top:10px;left:10px;z-index:10;display:flex;align-items:center}
#brand-circle{width:40px;height:40px;background:#ff0000;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;font-size:12px;text-align:center;line-height:1.1;box-shadow:0 0 10px rgba(255,0,0,0.7)}
#maximize-btn{position:absolute;top:10px;right:10px;background:rgba(0,0,0,0.7);color:white;border:none;border-radius:50%;width:40px;height:40px;font-size:18px;cursor:pointer;z-index:10;display:flex;align-items:center;justify-content:center}
#maximize-btn:active{background:rgba(97,218,251,0.8)}
#controls-container{flex:1;background:#2d2d2d;display:flex;flex-direction:column;height:60vh;overflow:hidden}
#channel-info{padding:8px 15px;background:#3c4043;border-bottom:1px solid #444;flex-shrink:0;display:flex;justify-content:space-between;align-items:center}
.channel-info-left{flex:1}
#current-channel{font-size:16px;font-weight:bold;margin-bottom:2px}
#channel-status{font-size:12px;color:#61dafb}
.favorite-btn{background:none;border:none;color:#888;font-size:18px;cursor:pointer;padding:5px}
.favorite-btn.active{color:#ff6b35}
#provider-buttons{display:grid;grid-template-columns:1fr 1fr;gap:6px;padding:8px;flex-shrink:0}
.provider-btn{padding:12px;background:linear-gradient(135deg,#ff6b35,#ff8e53);color:white;border:none;border-radius:8px;font-size:14px;font-weight:bold;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;box-shadow:0 4px 8px rgba(255,107,53,0.3)}
#converge-btn{background:linear-gradient(135deg,#61dafb,#8ae2ff);box-shadow:0 4px 8px rgba(97,218,251,0.3)}
.provider-btn:active{transform:scale(0.98)}
#quick-channels{flex:1;overflow-y:auto;padding:5px;display:grid;grid-template-columns:1fr 1fr;gap:5px;max-height:none}
.quick-channel{display:flex;align-items:center;padding:5px 6px;background:#3c4043;border-radius:5px;cursor:pointer;min-height:32px;position:relative}
.quick-channel:active{background:#61dafb;color:#000}
.quick-channel.active{background:#4fa3c4}
.channel-logo{width:22px;height:22px;margin-right:6px;border-radius:3px;object-fit:cover;flex-shrink:0}
.channel-name{font-size:11px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.channel-fav{color:#ff6b35;font-size:11px;margin-left:4px}
#volume-control{position:absolute;bottom:20px;right:20px;background:rgba(0,0,0,0.7);padding:10px;border-radius:20px;display:none;flex-direction:column;align-items:center;z-index:20}
#volume-slider{width:100px;height:5px;-webkit-appearance:none;background:#555;border-radius:5px;margin:10px 0}
#volume-slider::-webkit-slider-thumb{-webkit-appearance:none;width:15px;height:15px;border-radius:50%;background:#61dafb;cursor:pointer}
.fullscreen #video-container{height:100vh;position:fixed;top:0;left:0;width:100%;z-index:1000}
.fullscreen #controls-container{display:none}
.fullscreen #maximize-btn{top:20px;right:20px;background:rgba(0,0,0,0.8)}
#channel-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);z-index:1001;display:none;flex-direction:column}
#channel-header{padding:15px;background:#2d2d2d;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #444}
#close-channels{background:#ff4444;color:white;border:none;padding:8px 15px;border-radius:8px;cursor:pointer;font-size:14px}
#channels-list{flex:1;overflow-y:auto;padding:10px}
.toast{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:#333;color:white;padding:12px 20px;border-radius:8px;z-index:2000;animation:fadeInOut 3s ease-in-out}
@keyframes fadeInOut{0%,100%{opacity:0}10%,90%{opacity:1}}
.loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#61dafb;font-size:16px}
#channel-search{width:100%;padding:10px;margin-bottom:10px;background:#1a1a1a;border:1px solid #444;border-radius:8px;color:white;font-size:14px}
#settings-panel{position:fixed;top:0;right:-300px;width:300px;height:100%;background:#2d2d2d;z-index:1002;transition:right 0.3s ease;padding:20px;overflow-y:auto}
#settings-panel.open{right:0}
.settings-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid #444}
.settings-option{margin-bottom:15px}
.settings-label{display:block;margin-bottom:5px;font-size:14px}
.settings-select{width:100%;padding:8px;background:#1a1a1a;border:1px solid #444;border-radius:5px;color:white}
#recent-channels{display:none;padding:8px;border-bottom:1px solid #444}
.recent-channel{display:inline-flex;align-items:center;padding:4px 8px;margin-right:6px;background:#3c4043;border-radius:12px;font-size:11px;cursor:pointer}
.bottom-actions{display:flex;gap:8px;padding:6px;flex-shrink:0}
#settings-btn{padding:10px;background:#555;color:white;border:none;border-radius:6px;cursor:pointer;width:50px;display:flex;align-items:center;justify-content:center}
</style>
</head>
<body>
<div id="app-container">
<div id="video-container">
<div id="brand-logo"><div id="brand-circle">Reyniel<br>TV</div></div>
<video id="video" controls playsinline>Your browser does not support the video tag.</video>
<button id="maximize-btn">⛶</button>
<div class="loading" id="loading" style="display:none">Loading...</div>
<div id="volume-control"><i class="fas fa-volume-up"></i><input type="range" id="volume-slider" min="0" max="100" value="100"></div>
</div>
<div id="controls-container">
<div id="channel-info">
<div class="channel-info-left">
<div id="current-channel">Select a channel</div>
<div id="channel-status">Ready</div>
</div>
<button class="favorite-btn" id="favorite-btn"><i class="far fa-star"></i></button>
</div>
<div id="recent-channels"></div>
<div id="provider-buttons">
<button class="provider-btn" id="cignal-btn"><i class="fas fa-satellite-dish"></i>Cignal</button>
<button class="provider-btn" id="converge-btn"><i class="fas fa-bolt"></i>Converge</button>
</div>
<div id="quick-channels"></div>
<div class="bottom-actions"><button id="settings-btn" style="flex:1"><i class="fas fa-cog"></i> SETTINGS</button></div>
</div>
</div>

<div id="channel-overlay">
<div id="channel-header"><h3>All Channels</h3><button id="close-channels">Close</button></div>
<input type="text" id="channel-search" placeholder="Search channels...">
<div id="channels-list"></div>
</div>

<div id="settings-panel">
<div class="settings-header"><h3>Settings</h3><button id="close-settings" style="background:none;border:none;color:white;font-size:18px;cursor:pointer"><i class="fas fa-times"></i></button></div>
<div class="settings-option">
<label class="settings-label">Video Quality</label>
<select class="settings-select" id="quality-select"><option value="auto">Auto</option><option value="hd">HD</option><option value="sd">SD</option><option value="low">Low</option></select>
</div>
<div class="settings-option">
<label class="settings-label">Sleep Timer</label>
<select class="settings-select" id="sleep-timer"><option value="0">Off</option><option value="15">15 minutes</option><option value="30">30 minutes</option><option value="60">1 hour</option><option value="120">2 hours</option></select>
</div>
<div class="settings-option">
<label class="settings-label">Theme</label>
<select class="settings-select" id="theme-select"><option value="dark">Dark</option><option value="light">Light</option><option value="blue">Blue</option></select>
</div>
<div class="settings-option">
<label class="settings-label">Parental Controls</label>
<button style="width:100%;padding:10px;background:#ff6b35;color:white;border:none;border-radius:5px;cursor:pointer">Enable PIN</button>
</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/shaka-player.compiled.js"></script>

<script>
class EnhancedMobileIPTV{
constructor(){
this.channels=[];
this.currentChannelIndex=0;
this.player=null;
this.isFullscreen=false;
this.favorites=JSON.parse(localStorage.getItem('iptv_favorites')||'[]');
this.recentChannels=JSON.parse(localStorage.getItem('iptv_recent')||'[]');
this.currentProvider='cignal';
this.initializeApp();
}
initializeApp(){shaka.polyfill.installAll();this.player=new shaka.Player(document.getElementById('video'));this.setupPlayerEvents();this.loadCignalPlaylist();this.setupEventListeners();this.updateFavoritesUI();this.updateRecentChannelsUI();}
setupPlayerEvents(){this.player.addEventListener('error',e=>{document.getElementById('loading').style.display='none';this.updateChannelStatus('Error');console.error('Player error:',e);});this.player.addEventListener('loaded',()=>{document.getElementById('loading').style.display='none';this.updateChannelStatus('Playing');document.getElementById('video').play().catch(()=>{this.showToast('Tap the video to play')})});}
async loadCignalPlaylist(){const url='https://reiyhbit.github.io/iptv/playlist.m3u';await this.loadPlaylistFromUrl(url);}
async loadConvergePlaylist(){this.channels=[{name:'GTV',logo:'https://ottepg8.comclark.com:8443/iptvepg/images/markurl/mark_1723126332757.png',manifestUrl:'https://converse.nathcreqtives.com/1143/manifest.mpd',licenseUrl:'https://key.nathcreqtives.com/widevine/?deviceId=02:00:00:00:00:00'},{name:'TV5',logo:'https://ottepg8.comclark.com:8443/iptvepg/images/markurl/mark_1723134335547.png',manifestUrl:'https://converse.nathcreqtives.com/1088/manifest.mpd',licenseUrl:'https://key.nathcreqtives.com/widevine/?deviceId=02:00:00:00:00:00'},{name:'GMA 7',logo:'https://ottepg8.comclark.com:8443/iptvepg/images/markurl/mark_1723126306082.png',manifestUrl:'https://converse.nathcreqtives.com/1093/manifest.mpd',licenseUrl:'https://key.nathcreqtives.com/widevine/?deviceId=02:00:00:00:00:00'}];this.updateChannelList();this.updateQuickChannels();if(this.channels.length>0)this.playChannel(0);}
async loadPlaylistFromUrl(url){try{document.getElementById('loading').style.display='block';this.updateChannelStatus('Loading playlist...');const r=await fetch(url);if(r.ok){const text=await r.text();const interpreter=new M3U8Interpreter(text);interpreter.parse();this.channels=interpreter.getChannels();this.updateChannelList();this.updateQuickChannels();if(this.channels.length>0)this.playChannel(0)}else this.showToast('Failed to load playlist')}catch(e){console.error(e);this.showToast('Error loading playlist')}finally{document.getElementById('loading').style.display='none'}}
playChannel(index){if(index<0||index>=this.channels.length)return;this.currentChannelIndex=index;const ch=this.channels[index];this.addToRecent(index);try{if(this.currentProvider==='converge'){this.player.configure({drm:{servers:{'com.widevine.alpha':ch.licenseUrl}}});}this.player.load(ch.manifestUrl);this.updateChannelInfo(ch.name);this.updateFavoriteButton();this.updateChannelList();this.updateQuickChannels();this.showToast(`Now playing: ${ch.name}`)}catch(e){console.error(e);this.showToast('Error playing channel');this.updateChannelStatus('Error');}}
addToRecent(index){this.recentChannels=this.recentChannels.filter(i=>i!==index);this.recentChannels.unshift(index);if(this.recentChannels.length>5)this.recentChannels=this.recentChannels.slice(0,5);localStorage.setItem('iptv_recent',JSON.stringify(this.recentChannels));this.updateRecentChannelsUI();}
updateRecentChannelsUI(){const container=document.getElementById('recent-channels');if(this.recentChannels.length===0){container.style.display='none';return;}container.style.display='block';container.innerHTML='<span style="margin-right:10px;font-size:11px;color:#aaa;">Recent:</span>';this.recentChannels.forEach(i=>{const ch=this.channels[i];if(!ch)return;const el=document.createElement('div');el.className='recent-channel';el.innerHTML=`<img src="${ch.logo}" style="width:14px;height:14px;border-radius:2px;margin-right:4px;" onerror="this.style.display='none'"><span>${ch.name}</span>`;el.addEventListener('click',()=>this.playChannel(i));container.appendChild(el);});}
toggleFavorite(){const i=this.currentChannelIndex;if(this.favorites.includes(i)){this.favorites=this.favorites.filter(x=>x!==i);this.showToast('Removed from favorites')}else{this.favorites.push(i);this.showToast('Added to favorites')}localStorage.setItem('iptv_favorites',JSON.stringify(this.favorites));this.updateFavoriteButton();this.updateQuickChannels();this.updateChannelList();}
updateFavoriteButton(){const btn=document.getElementById('favorite-btn');btn.classList.toggle('active',this.favorites.includes(this.currentChannelIndex));btn.innerHTML=this.favorites.includes(this.currentChannelIndex)?'<i class="fas fa-star"></i>':'<i class="far fa-star"></i>';}
updateFavoritesUI(){this.updateFavoriteButton();}
updateChannelInfo(name){document.getElementById('current-channel').textContent=name;}
updateChannelStatus(status){document.getElementById('channel-status').textContent=status;}
toggleFullscreen(){this.isFullscreen=!this.isFullscreen;const app=document.getElementById('app-container');const btn=document.getElementById('maximize-btn');if(this.isFullscreen){app.classList.add('fullscreen');btn.textContent='⛷';}else{app.classList.remove('fullscreen');btn.textContent='⛶';}}
showVolumeControl(){const vol=document.getElementById('volume-control');vol.style.display='flex';setTimeout(()=>{vol.style.display='none'},3000);}
updateChannelList(){const list=document.getElementById('channels-list');list.innerHTML='';this.channels.forEach((ch,i)=>{const item=document.createElement('div');item.className='channel-item'+(i===this.currentChannelIndex?' active':'');item.innerHTML=`<img src="${ch.logo}" class="channel-logo" onerror="this.style.display='none'"><span class="channel-name">${ch.name}</span>`;item.addEventListener('click',()=>this.playChannel(i));list.appendChild(item);});}
updateQuickChannels(){const qc=document.getElementById('quick-channels');qc.innerHTML='';this.channels.forEach((ch,i)=>{const div=document.createElement('div');div.className='quick-channel'+(i===this.currentChannelIndex?' active':'');div.innerHTML=`<img src="${ch.logo}" class="channel-logo" onerror="this.style.display='none'"><span class="channel-name">${ch.name}</span>`;if(this.favorites.includes(i))div.innerHTML+=`<i class="fas fa-star channel-fav"></i>`;div.addEventListener('click',()=>this.playChannel(i));qc.appendChild(div);});}
showToast(msg){const t=document.createElement('div');t.className='toast';t.textContent=msg;document.body.appendChild(t);setTimeout(()=>t.remove(),3000);}
setupEventListeners(){document.getElementById('favorite-btn').addEventListener('click',()=>this.toggleFavorite());document.getElementById('maximize-btn').addEventListener('click',()=>this.toggleFullscreen());document.getElementById('cignal-btn').addEventListener('click',()=>{this.currentProvider='cignal';this.loadCignalPlaylist();});document.getElementById('converge-btn').addEventListener('click',()=>{this.currentProvider='converge';this.loadConvergePlaylist();});document.getElementById('close-channels').addEventListener('click',()=>{document.getElementById('channel-overlay').style.display='none'});document.getElementById('settings-btn').addEventListener('click',()=>document.getElementById('settings-panel').classList.add('open'));document.getElementById('close-settings').addEventListener('click',()=>document.getElementById('settings-panel').classList.remove('open'));document.getElementById('channel-search').addEventListener('input',(e)=>{const val=e.target.value.toLowerCase();document.querySelectorAll('#channels-list .channel-item').forEach(item=>{item.style.display=item.textContent.toLowerCase().includes(val)?'flex':'none'})});document.getElementById('volume-slider').addEventListener('input',(e)=>{document.getElementById('video').volume=e.target.value/100});document.getElementById('video').addEventListener('click',()=>this.showVolumeControl());}
}

class M3U8Interpreter{
constructor(data){this.data=data;this.channels=[];}
parse(){const lines=this.data.split(/\r?\n/);let current={};lines.forEach(line=>{line=line.trim();if(!line||line.startsWith('#EXTM3U'))return;if(line.startsWith('#EXTINF')){current={name:(line.split(',')[1]||'Unknown'),logo:''};const logoMatch=line.match(/tvg-logo="([^"]+)"/);if(logoMatch)current.logo=logoMatch[1];}else if(!line.startsWith('#')){current.url=line;current.manifestUrl=line;current.licenseUrl=null;this.channels.push({...current});current={};}});}
getChannels(){return this.channels;}
}

window.addEventListener('load',()=>{window.iptvApp=new EnhancedMobileIPTV();});
</script>
</body>
</html>
